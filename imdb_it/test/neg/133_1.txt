These days, writers, directors and producers increasingly rely on the "surprise" ending. The old art of bringing a movie to a close, taking all the information we learned through the film and bringing it to a nice, complete ending, has been lost. Now what we have is a film that, however complex, detailed or frivolous, can be enclosed in 5 minutes. It was all in his head. This explanation is the director's safety net. If all else fails, or if the writing is not so good, or if we run out of money to complete the film, we can always say "it was all in his head" and finish the film that way. The public will buy it because, none of us is a psychologist, and none of us suffer from schizophrenia (not that we know about it), so let's take the story and believe it. After all, the mind is a powerful thing. Some movies have taken it away. But those movies are the reason we are getting more and more of these shit finals. Every director / writer now thinks he can do it because, well, Fight Club did it and made a lot of money. So we get movies like The Machinist, Secret Window, Identity and this movie (just to name a few).
